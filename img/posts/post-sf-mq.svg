<svg height="374.4375" version="1.1" width="860.953125" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative;"><desc>Created with Raphaël 2.2.0</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock55-obj9b8qk" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj5czwr" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-objtp3sp" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obja31dr" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj9c1wh" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker></defs><rect x="10" y="10" width="246.84375" height="28" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="15" y="15" width="236.84375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="133.421875" y="24" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">MessageQueue 消息机制（一）</tspan></text><rect x="10" y="48" width="135.21875" height="57.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="58" width="115.21875" height="37.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="77.609375" y="76.609375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-4.0859375">MessageQueue</tspan><tspan dy="19.2" x="77.609375">(native)</tspan></text><rect x="10" y="297.21875" width="135.21875" height="57.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="307.21875" width="115.21875" height="37.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="77.609375" y="325.828125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-4.0859375">MessageQueue</tspan><tspan dy="19.2" x="77.609375">(native)</tspan></text><path fill="none" stroke="#000000" d="M77.609375,105.21875L77.609375,297.21875" stroke-width="2" style=""></path><rect x="241.234375" y="48" width="96.8125" height="57.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="251.234375" y="58" width="76.8125" height="37.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="289.640625" y="76.609375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-4.0859375">Looper</tspan><tspan dy="19.2" x="289.640625">(native)</tspan></text><rect x="241.234375" y="297.21875" width="96.8125" height="57.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="251.234375" y="307.21875" width="76.8125" height="37.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="289.640625" y="325.828125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-4.0859375">Looper</tspan><tspan dy="19.2" x="289.640625">(native)</tspan></text><path fill="none" stroke="#000000" d="M289.640625,105.21875L289.640625,297.21875" stroke-width="2" style=""></path><rect x="521.296875" y="48" width="96.8125" height="57.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="531.296875" y="58" width="76.8125" height="37.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="569.703125" y="76.609375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-4.0859375">Handler</tspan><tspan dy="19.2" x="569.703125">(native)</tspan></text><rect x="521.296875" y="297.21875" width="96.8125" height="57.21875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="531.296875" y="307.21875" width="76.8125" height="37.21875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="569.703125" y="325.828125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="-4.0859375">Handler</tspan><tspan dy="19.2" x="569.703125">(native)</tspan></text><path fill="none" stroke="#000000" d="M569.703125,105.21875L569.703125,297.21875" stroke-width="2" style=""></path><rect x="87.609375" y="121.21875" width="192.03125" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="183.625" y="130.21875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">postMessage(handler)</tspan></text><path fill="none" stroke="#000000" d="M77.609375,143.21875C77.609375,143.21875,252.593768985942,143.21875,284.6343684706726,143.21875" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj9b8qk)" stroke-dasharray="none" style=""></path><rect x="314.640625" y="163.21875" width="240.0625" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="434.671875" y="172.21875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">sendMessage(handler, msg)</tspan></text><path fill="none" stroke="#000000" d="M289.640625,158.21875L309.640625,158.21875" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="none" stroke="#000000" d="M309.640625,158.21875L309.640625,191.21875" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="none" stroke="#000000" d="M309.640625,191.21875C309.640625,191.21875,300.5597381591797,191.21875,294.6358783841133,191.21875" stroke-width="2" stroke-dasharray="none" marker-end="url(#raphael-marker-endblock55-obj5czwr)" style=""></path><rect x="314.640625" y="201.21875" width="28.8125" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="329.046875" y="210.21875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">...</tspan></text><path fill="none" stroke="#000000" d="M289.640625,196.21875L309.640625,196.21875" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="none" stroke="#000000" d="M309.640625,196.21875L309.640625,229.21875" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="none" stroke="#000000" d="M309.640625,229.21875C309.640625,229.21875,300.5597381591797,229.21875,294.6358783841133,229.21875" stroke-width="2" stroke-dasharray="none" marker-end="url(#raphael-marker-endblock55-objtp3sp)" style=""></path><rect x="0" y="0" width="0" height="0" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="429.671875" y="244.21875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="244.21875"></tspan></text><path fill="none" stroke="#000000" d="M289.640625,239.21875C289.640625,239.21875,527.0228138901293,239.21875,564.6933272638071,239.21875" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obja31dr)" stroke-dasharray="6,2" style=""></path><rect x="594.703125" y="259.21875" width="172.84375" height="18" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="681.125" y="268.21875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">handleMessage(msg)</tspan></text><path fill="none" stroke="#000000" d="M569.703125,254.21875L589.703125,254.21875" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="none" stroke="#000000" d="M589.703125,254.21875L589.703125,287.21875" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="none" stroke="#000000" d="M589.703125,287.21875C589.703125,287.21875,580.6222381591797,287.21875,574.6983783841133,287.21875" stroke-width="2" stroke-dasharray="none" marker-end="url(#raphael-marker-endblock55-obj9c1wh)" style=""></path></svg>